<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>YouTube字幕全文表示</title>
  <style>
    body { font-family: system-ui, -apple-system, 'Segoe UI', sans-serif; margin: 0; background: #f5f7fb; color: #222; }
    header { background: #111827; color: #fff; padding: 16px 24px; }
    main { max-width: 860px; margin: 24px auto; background: #fff; padding: 24px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
    h1 { margin: 0 0 12px; font-size: 1.6rem; }
    form { display: grid; gap: 12px; }
    label { font-weight: 600; }
    input[type="text"] { width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 1rem; }
    button { background: #2563eb; color: #fff; border: none; padding: 12px 16px; border-radius: 8px; font-size: 1rem; cursor: pointer; }
    button:hover { background: #1d4ed8; }
    .notice { background: #eff6ff; color: #1e3a8a; padding: 12px 16px; border-radius: 8px; margin-bottom: 12px; }
    .error { background: #fef2f2; color: #b91c1c; padding: 12px 16px; border-radius: 8px; margin-top: 12px; }
    .results { margin-top: 20px; display: grid; gap: 10px; }
    .card { border: 1px solid #e5e7eb; border-radius: 10px; padding: 12px 14px; }
    .timestamp { display: inline-block; background: #111827; color: #fff; padding: 4px 8px; border-radius: 6px; font-size: 0.9rem; margin-bottom: 6px; }
    .text { font-size: 1rem; margin: 4px 0 0; }
    footer { text-align: center; color: #6b7280; margin: 24px 0; font-size: 0.9rem; }
  </style>
</head>
<body>
  <header>
    <h1>YouTube字幕全文表示</h1>
    <p>動画URLを入力すると、字幕全文をそのまま表示します。</p>
  </header>
  <main>
    <div class="notice">字幕が取得できる動画のみ対応しています。URLまたは動画IDを入力してください。</div>
    <form method="POST">
      <div>
        <label for="video_url">YouTubeのURLまたは動画ID</label>
        <input id="video_url" type="text" name="video_url" placeholder="https://www.youtube.com/watch?v=..." value="{{ video_url }}" required>
      </div>
      <div>
        <label for="languages">字幕の優先言語 (スペース区切りで複数指定可)</label>
        <input id="languages" type="text" name="languages" placeholder="例: ja en" value="{{ languages_input }}">
      </div>
      <button type="submit">字幕を取得する</button>
    </form>

    {% if error %}
      <div class="error">{{ error }}</div>
    {% endif %}

    {% if transcript %}
      <div class="results">
        <h2>取得した字幕</h2>
        {% for line in transcript %}
          <div class="card">
            <div class="timestamp">{{ format_timestamp(line.start) }}</div>
            <div class="text">{{ line.text }}</div>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </main>
  <footer>
    <p>字幕がない動画の場合はエラーメッセージが表示されます。</p>
  </footer>
</body>
</html>
